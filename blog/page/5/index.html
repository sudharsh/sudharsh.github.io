
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>42</title>
	<meta name="author" content="Sudharshan S">

	
	<meta name="description" content="Jun 10th, 2008 FOSS and Linux, Rants, embedded, freesmartphone.org, gsoc, linux, neo1973, odeviced, openmoko Comments I Got a Job at Google *glee* ( &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="42" type="application/atom+xml">
	
	<link rel="canonical" href="http://sudharsh.me/blog/page/5/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-45074307-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/16cc3864b1764a9e45a76ef4724ff7bb?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<div class="tagline">
  <h3>
  Code, and a tiny flippin bit of Adventure
  </h3>
</div>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		
			<a class="twitter" href="http://twitter.com/zphds" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/sudharsh" title="GitHub">GitHub</a>
		
		
		
		
			<a class="linkedin" href="http://www.linkedin.com/pub/sudharshan-s/8/449/958" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-06-10T19:28:00+05:30" data-updated="true" itemprop="datePublished">Jun 10<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/foss-and-linux/'>FOSS and Linux</a>, <a class='category' href='/blog/categories/rants/'>Rants</a>, <a class='category' href='/blog/categories/embedded/'>embedded</a>, <a class='category' href='/blog/categories/freesmartphone-dot-org/'>freesmartphone.org</a>, <a class='category' href='/blog/categories/gsoc/'>gsoc</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/neo1973/'>neo1973</a>, <a class='category' href='/blog/categories/odeviced/'>odeviced</a>, <a class='category' href='/blog/categories/openmoko/'>openmoko</a>


</div>
		
			<span class="comments"><a href="/blog/2008/06/10/i-got-a-job-at-google-glee-honest/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/06/10/i-got-a-job-at-google-glee-honest/" itemprop="url">I Got a Job at Google *glee* (Honest)</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>I am pretty sure my friends would go &ldquo;WTF, you are too dumb for Goog&rdquo; by now.</p>

<p>Guess what, I am a <a href="http://www.ajuonline.net/blog2/technology/2008/06/10/rtfm-nah-go-look-at-my-employers-website/">full time employee</a> of Google now!. (<em>ahem</em> for three months).</p>

<p>I was more of an impression that I was technically an intern for three months. But after reading <a href="http://www.ajuonline.net/blog2/technology/2008/06/10/rtfm-nah-go-look-at-my-employers-website/">Aju&rsquo;s post</a>, it turns out all Summer of Code students are technically full time employees. (Anyone thinking otherwise please comment).</p>

<p>This means I get uber bragging rights.</p>

<p>What happens after 3 months when I am jobless again?</p>

<p>Simple. Just tell everyone <em>&ldquo;I quit&rdquo; </em>because they refused to send me another t-shirt. :D</p>

<p>Speaking of GSoC, the progress report of my project can be found <a href="http://projects.linuxtogo.org/pipermail/smartphones-standards/2008-June/000096.html">here</a>. For some strange reason I was not able to push code to the <a href="http://git.freesmartphone.org/?p=openmoko-gsoc2008.git;a=summary">git repository</a>. Find today&rsquo;s snapshot <a href="http://sudharsh.unixpod.com/odeviced-20080610.tar.bz2">here</a>.</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-06-08T20:06:00+05:30" data-updated="true" itemprop="datePublished">Jun 8<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/rants/'>Rants</a>, <a class='category' href='/blog/categories/bleh/'>bleh</a>


</div>
		
			<span class="comments"><a href="/blog/2008/06/08/bhootkiddo/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/06/08/bhootkiddo/" itemprop="url">BhootKiddo..</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><img class="center" src="http://sudharsh.files.wordpress.com/2008/06/image004.jpg?w=128"></p>

<p>As the summer holidays progress, I am finding myself become a nocturnal being. My sense of a &ldquo;day&rdquo; has changed a lot.</p>

<p>Wake up at 1200 or 1300 hours and fall asleep at around 2-3 AM, in a position as in the above photo (taken from my mobile which has a crappy camera). Back against the window, legs across my cot only to find myself waking up late in the afternoon sun with an excruciating pain in my back. Its great in a way, since both my parents leave for work early and I have the entire house to myself (na, I don&rsquo;t run around naked).</p>

<p>After waking up, the usual stuff, watch TV for a while and back to GSoC stuff..</p>

<p>Move my butt around at 5 PM to the guitar classes, return back watch Seinfeld, eat, and back to code&hellip;</p>

<p>Trust me, fixing segfaults are really fun, but I think I need to go out and play for a while&hellip; :/..I find myself lacking a <strong>life</strong> these days :(</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-06-05T12:39:00+05:30" data-updated="true" itemprop="datePublished">Jun 5<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/foss-and-linux/'>FOSS and Linux</a>, <a class='category' href='/blog/categories/logs/'>Logs</a>, <a class='category' href='/blog/categories/embedded/'>embedded</a>, <a class='category' href='/blog/categories/freesmartphone-dot-org/'>freesmartphone.org</a>, <a class='category' href='/blog/categories/gsoc/'>gsoc</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/neo1973/'>neo1973</a>, <a class='category' href='/blog/categories/odeviced/'>odeviced</a>, <a class='category' href='/blog/categories/openmoko/'>openmoko</a>


</div>
		
			<span class="comments"><a href="/blog/2008/06/05/battery-plugin-and-more/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/06/05/battery-plugin-and-more/" itemprop="url">Battery Plugin and More..</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>After a little chat with <a href="http://www.vanille-media.de/site/index.php/blog/">mickeyl</a>, I realised that exposing crucial functions like load() and unload() was not that of a good idea considering how <a href="http://git.freesmartphone.org/?p=openmoko-gsoc2008.git;a=summary">odeviced</a> is supposed to closely interact with the underlying devices. Consequently there has been some changes over the last week,</p>

<ul>
<li><p>No DBus interface for the service.</p></li>
<li><p>Plugins have now access to a set of helper functions. Only two at the moment (Think setting up DBus object paths)</p></li>
<li><p>Plugins once loaded become resident, that is they cannot be unloaded. If plugins are to be disabled during startup, just remove them from the &ldquo;enable&rdquo; field in the global configuration file.</p></li>
<li><p>Per plugin configuration. Each plugins now have their own configuration. Makes more sense, since this mean plugins can have greater freedom with their settings. I really like how the newly checked in <a href="http://git.freesmartphone.org/?p=openmoko-gsoc2008.git;a=tree;f=odeviced/plugins/backlight;h=cf890037a9a39f4a801ea9e5984c40af8440fa03;hb=e21a88cf6a35d9ef43a3d0836be26bdae733d670">battery plugin</a> exploits this.</p></li>
<li><p>Freshly checked in battery plugin. Makes use of sysfs for its functions viz. get_current_brightness, set_brightness, get_maximum_brightness.</p></li>
</ul>


<p><a href="http://en.wikipedia.org/wiki/Sysfs">SysFS</a> (/sys in 2.6.x.x) is sort of similar to the /proc filesystem and acts as an interface for user-space applications to control/access various devices. One of the neat things about sysfs is the fact that all files consist of only a <strong>single</strong> entry. This means I don&rsquo;t have to write a separate parser to extract data from them. So a simple fprintf or fscanf or even the seemingly mundane &ldquo;echo&rdquo; can be used to control the devices.</p>

<p>I am also planning to work on the python shell for odeviced for a while. This will be really convenient for testing the service. Something like this,</p>

<p><code>&gt; Wifi is_on wlan0
True
</code></p>

<p>The code can be checked out from <a href="http://git.freesmartphone.org/?p=openmoko-gsoc2008.git;a=summary">here</a>. I can&rsquo;t wait till I get hold of a FreeRunner to test odeviced out. :)</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-06-02T15:31:00+05:30" data-updated="true" itemprop="datePublished">Jun 2<span>nd</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/foss-and-linux/'>FOSS and Linux</a>, <a class='category' href='/blog/categories/logs/'>Logs</a>, <a class='category' href='/blog/categories/embedded/'>embedded</a>, <a class='category' href='/blog/categories/gsoc/'>gsoc</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/neo1973/'>neo1973</a>, <a class='category' href='/blog/categories/odeviced/'>odeviced</a>, <a class='category' href='/blog/categories/openmoko/'>openmoko</a>


</div>
		
			<span class="comments"><a href="/blog/2008/06/02/the-code-is-in/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/06/02/the-code-is-in/" itemprop="url">The Code Is In&#8230;</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Yay. Got the repository for odeviced set up at <a href="http://git.freesmartphone.org/?p=openmoko-gsoc2008.git;a=summary">http://git.freesmartphone.org</a></p>

<p>Boy, do I love <a href="http://git.or.cz/">git</a>.</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-06-01T19:39:00+05:30" data-updated="true" itemprop="datePublished">Jun 1<span>st</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/college/'>College</a>, <a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/rants/'>Rants</a>, <a class='category' href='/blog/categories/bleh/'>bleh</a>


</div>
		
			<span class="comments"><a href="/blog/2008/06/01/what-motivates-you-motivation/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/06/01/what-motivates-you-motivation/" itemprop="url">&#8220;What Motivates You? Motivation&#8221;</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>I will be entering final year in a couple of months and this means&hellip;PLACEMENTS!!! yay! (..or the lack of it)</p>

<p>This means more &ldquo;Mock Interviews Sessions&rdquo; and &ldquo;GDs&rdquo; to &ldquo;empower&rdquo; engineering students to get placed in the only 3 software companies that exist in this physical Universe. Infosys, TCS and CTS (Apparently our college is too dumb for <em>hybrid </em>corporates like m$).</p>

<p>And this <a href="http://pravunplugged.blogspot.com/2005/03/mock-interview.html">blog post</a> sort of sums up my thoughts. Highly hilarious, rolled on the floor injuring my <em>mutti.</em></p>

<p>Especially at this,</p>

<p><em>&ldquo;Any actual work experience?
Buying groceries for my neighbour who has this pretty daughter called Gayathri.&rdquo;</em></p>

<p>Oh, yeah! I can empathize.</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-05-29T17:58:00+05:30" data-updated="true" itemprop="datePublished">May 29<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/foss-and-linux/'>FOSS and Linux</a>, <a class='category' href='/blog/categories/rants/'>Rants</a>, <a class='category' href='/blog/categories/bleh/'>bleh</a>, <a class='category' href='/blog/categories/embedded/'>embedded</a>, <a class='category' href='/blog/categories/freesmartphone-dot-org/'>freesmartphone.org</a>, <a class='category' href='/blog/categories/gsoc/'>gsoc</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/neo1973/'>neo1973</a>, <a class='category' href='/blog/categories/odeviced/'>odeviced</a>, <a class='category' href='/blog/categories/openmoko/'>openmoko</a>


</div>
		
			<span class="comments"><a href="/blog/2008/05/29/first-frigging-milestone/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/05/29/first-frigging-milestone/" itemprop="url">First Frigging Milestone..</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Why Milestone? Nope, I didn&rsquo;t come up with fancy code or a &ldquo;beautiful&rdquo; one for that matter (Came up with a way to unload plugins). Milestone, because today was the first day I was squeezing up my half empty head to work around a teency weency problem. In short, I am happy I was actually <strong>thinking</strong> today about squishing a segmentation fault which was bringing the whole house down due to dbus and the kinky wifi plugin.</p>

<p>Now a word of warning. The wifi plugin is a circus freak of sorts. Being the lazy bum I am, I found it a drag to manually get into the trouble of coming up with xml introspection data for the &ldquo;org.freesmartphone.Device.plugins.wifi&rdquo; interface.</p>

<p>Instead I just came up with a grand plan of letting <em>valac</em> generate wifi.c and wifi.h, which I could modify later. Piece of cake? Sure&hellip;</p>

<p>After the wifi plugin is loaded it works pretty well. The keyword being &ldquo;After&rdquo;&hellip;By the way, check the <a href="http://projects.linuxtogo.org/pipermail/smartphones-standards/2008-May/000078.html">progress report</a> which I sent to the <a href="http://projects.linuxtogo.org/pipermail/smartphones-standards/">smartphone-standards</a> list. That should give you an idea of how odeviced works and looks like. In fact, it works pretty satisfactorily discounting the segmentation faults :D, which is <strong>easily </strong>reproducible in the following ways,</p>

<ul>
<li><p>Don&rsquo;t load the wifi plugin on startup, set enable=0 in odeviced.conf. Instead load it manually after odeviced starts up and begins to idle.</p></li>
<li><p>If the wifi plugin is already loaded, unload it and then try to load it again.</p></li>
</ul>


<p>Part of this problem might be my arrogance of not to use GTypeModules for dynamically typing the plugins. I need to discuss with my mentor, mickeyl about this once he gets back to business after <a href="http://www.linuxtag.org/2008/en/">LinuxTag</a>.</p>

<p>The barely bare bones powercontrol plugin loads and unloads without any problems, but it doesn&rsquo;t do anything as remotely useful as the wifi plugin!! Just contains an init function that has a printf in it (bleh!, thank goodness it didn&rsquo;t bail out).</p>

<p>Oh and the all important <a href="http://sudharsh.unixpod.com/odeviced-20080529.tar.bz2">tarball</a> is here. Highly effective than laughing gas!</p>

<p>&hellip;Another gdb session beckons</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-05-22T11:18:00+05:30" data-updated="true" itemprop="datePublished">May 22<span>nd</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/foss-and-linux/'>FOSS and Linux</a>, <a class='category' href='/blog/categories/embedded/'>embedded</a>, <a class='category' href='/blog/categories/freesmartphone-dot-org/'>freesmartphone.org</a>, <a class='category' href='/blog/categories/gsoc/'>gsoc</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/neo1973/'>neo1973</a>, <a class='category' href='/blog/categories/odeviced/'>odeviced</a>, <a class='category' href='/blog/categories/openmoko/'>openmoko</a>


</div>
		
			<span class="comments"><a href="/blog/2008/05/22/odeviced-progress-report-p/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/05/22/odeviced-progress-report-p/" itemprop="url">Odeviced: Progress Report :P</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>So, presenting a preliminary skeleton service for odeviced that loads shared object libraries (or in other words plugins). Nothing to be proud of, but hey, something is better than nothing.</p>

<p>Here&rsquo;s a screenshot of a very very preliminary odeviced in action..</p>

<p><a href="http://sudharsh.unixpod.com/Screenshot.png"><img src="http://sudharsh.unixpod.com/Screenshot.png" alt="odeviced" /></a></p>

<p>Basically its just a dbus service that can load modules from a predefined location. Here&rsquo;s how it works currently,</p>

<ul>
<li><p>Setup all the boring stuff like registering the object path and getting the connection to the DBus system bus. The interface used will be &ldquo;org.freesmartphone.Device&rdquo;.</p></li>
<li><p>The service reads the configuration file at /etc/odeviced.conf whose contents are as follows,`</p>

<h1>General configurations</h1>

<p>[odeviced]
device_name=FreeRunner<code>
</code>[powercontrol]
enable=1`</p></li>
<li><p>So from the above configuration, the device name is set to FreeRunner and odeviced tries to load the powercontrol plugin since &ldquo;enable&rdquo; is set to 1. Of course, the dbus service exposes the load method to load plugins manually after the service has started if the need arises.</p></li>
<li><p>The default directory for plugins is at &lsquo;/usr/share/odeviced/plugins&rsquo;. Maybe additional directories for other plugins can be set in odeviced.conf. By now odeviced tries to load the plugin libpowercontrol.so under &lsquo;/usr/share/odeviced/plugins&rsquo;.</p></li>
<li><p>After successful loading of the plugin, odeviced executes the init function in the plugin which is of the form &lt;plugin_name>_init. In our case it is powercontrol_init. The dbus paths for the plugins are to be set here. So we would have object paths such as &ldquo;/org/freesmartphone/Device/plugins/powercontrol&#8217;. This is yet to be done.</p></li>
<li><p>As evident in the above screenshot the powercontrol_init contains a single printf statement which merely spits out &ldquo;In powercontrol&rdquo;. And yes, the powercontrol plugin is written in good ol&#8217; C.</p></li>
</ul>


<p>Notice the gnome-terminal at the right. It is running a simple python helper script for testing odeviced. It simply reads from stdin and calls the `load&#8217; method offered by the dbus service with the input as the argument. As you can see, powercontrol has been loaded successfully but &ldquo;l&rdquo; and &ldquo;this_aint_a_plugin&rdquo; gives a critical warning that these plugins couldn&rsquo;t be found.</p>

<p><em>What needs to be done</em></p>

<ul>
<li><p>Make the code &ldquo;beautiful&rdquo;. :D. I am constantly on the lookout for vala&#8217;ish ways of doing things. Still need to work on my OOP skills :/.</p></li>
<li><p>Come up with a decent plugin for powercontrol.</p></li>
<li><p>Put in some example apps or port the existing OM ones to use odeviced.</p></li>
</ul>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-05-18T15:32:00+05:30" data-updated="true" itemprop="datePublished">May 18<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/foss-and-linux/'>FOSS and Linux</a>, <a class='category' href='/blog/categories/logs/'>Logs</a>, <a class='category' href='/blog/categories/embedded/'>embedded</a>, <a class='category' href='/blog/categories/gsoc/'>gsoc</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/neo1973/'>neo1973</a>, <a class='category' href='/blog/categories/odeviced/'>odeviced</a>, <a class='category' href='/blog/categories/openmoko/'>openmoko</a>


</div>
		
			<span class="comments"><a href="/blog/2008/05/18/fun-with-vala-and-dbus/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/05/18/fun-with-vala-and-dbus/" itemprop="url">Fun With Vala and DBus</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>After the lousy semester exams, I decided put in some time to learn <a href="http://live.gnome.org/Vala">vala</a> and <a href="http://freedesktop.org/wiki/Software/dbus">dbus</a> to cheer me up. For the unitiated,</p>

<ul>
<li><p>&lsquo;<em>Vala is a new programming language that aims to bring modern programming language features to GNOME developers without imposing any additional runtime requirements and without using a different ABI compared to applications and libraries written in C.</em>&rsquo;</p></li>
<li><p>DBus is a low latency IPC system with less overhead with emphasis on desktop applications</p></li>
</ul>


<p>I must say the folks at #vala in GimpNet has been patient with me, especially considering the silly questions I had been asking for the last couple of days. I should get commit access to the git repositories of freesmartphone.org in a short while as well :D.</p>

<p>I learned a couple of things on the way. Especially the KeyFile API from the <a href="http://library.gnome.org/devel/glib/">GLib</a> library really rocked. Note that odeviced would have configuration file sitting in &lsquo;/etc&rsquo; containing various settings like plugins to be loaded, their own internal switches and so on. I would have almost &ldquo;reinvented the wheel&rdquo; trying to reimplement stuff thats already provided by GLib if I hadn&rsquo;t browsed through the API reference of GLib. Implementing something like the above for odeviced in vala looks something like this,</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='vala'><span class='line'><span class="p">....</span>
</span><span class='line'><span class="kd">private</span> <span class="n">GLib</span><span class="p">.</span><span class="n">KeyFile</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GLib</span><span class="p">.</span><span class="n">KeyFile</span><span class="p">();</span>
</span><span class='line'><span class="kd">private</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">plugins</span><span class="p">;</span>
</span><span class='line'><span class="kd">private</span> <span class="kt">string</span> <span class="n">dev_name</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">();</span>
</span><span class='line'><span class="p">......</span>
</span><span class='line'><span class="cm">/* vala will warn you if you dont put this under a try, catch block */</span>
</span><span class='line'><span class="n">file</span><span class="p">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s">&quot;/etc/odeviced.conf&quot;</span><span class="p">,</span> <span class="n">GLib</span><span class="p">.</span><span class="n">KeyFileFlags</span><span class="p">.</span><span class="n">NONE</span><span class="p">);</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">has_group</span><span class="p">(</span><span class="s">&quot;odeviced&quot;</span><span class="p">))</span>
</span><span class='line'><span class="k">this</span><span class="p">.</span><span class="n">dev_name</span> <span class="o">=</span> <span class="n">file</span><span class="p">.</span><span class="n">get_string</span><span class="p">(</span><span class="s">&quot;odeviced&quot;</span><span class="p">,</span> <span class="s">&quot;device_name&quot;</span><span class="p">);</span>
</span><span class='line'><span class="n">plugins</span> <span class="o">=</span> <span class="n">file</span><span class="p">.</span><span class="n">get_groups</span><span class="p">();</span>
</span><span class='line'><span class="n">_load</span><span class="p">(</span><span class="n">plugins</span><span class="p">);</span>
</span><span class='line'><span class="p">....</span>
</span></code></pre></td></tr></table></div></figure>


<p>Of course, the corresponding configuration file will look something like this,</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ini'><span class='line'><span class="k">[odeviced]</span>
</span><span class='line'><span class="na">device_name</span><span class="o">=</span><span class="s">FreeRunner</span>
</span><span class='line'>
</span><span class='line'><span class="k">[powercontrol]</span>
</span><span class='line'><span class="na">enable</span><span class="o">=</span><span class="s">1</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the above example, things within &lsquo;[&rsquo; and &lsquo;]&rsquo; are group names and each of these groups consist of a key-value pair.</p>

<p>As for the dbus part, each plugin would set up dbus objects on their own. GModule library will be used to load the <em>.so</em> libraries. So we&rsquo;d have object paths like <code>/org/freesmartphone/Device/powercontroller</code>. And of course, odeviced will be on the System Bus.</p>

<p>On a related note, the &ldquo;surprise&rdquo; gift is on its way :D.</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-04-30T16:34:00+05:30" data-updated="true" itemprop="datePublished">Apr 30<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/college/'>College</a>, <a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/rants/'>Rants</a>, <a class='category' href='/blog/categories/bleh/'>bleh</a>


</div>
		
			<span class="comments"><a href="/blog/2008/04/30/a-debacle-of-an-exam/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/04/30/a-debacle-of-an-exam/" itemprop="url">A Debacle of an Exam&#8230;</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>One of the Life&rsquo;s greatest ironies. I actually enjoyed studying for the Artificial Intelligence exam, one of my favourite areas. In fact an hour of my favorite anime, <a href="http://en.wikipedia.org/wiki/Ghost_in_the_shell">Ghost in the Shell: SAC</a> on monday was timed perfectly for the exam the next day.</p>

<p>But when I received the question paper, I sat there wide eyed just like the android who gets pwned by the <a href="http://en.wikipedia.org/wiki/Tachikomas">Tachikomas</a> when they attack her with the <a href="http://en.wikipedia.org/wiki/Liar_paradox">Liar Paradox</a>. A big BLEH..</p>

<p>I managed to write (in my own words and crappy handwriting), a couple of big questions and 5 short ones. To add insult to the injury, yesterday&rsquo;s paper was my personal record for the most number of pages filled in an exam; 42/44. My previous record was 34 :D.</p>

<p>On the brighter side, I may get to read Peter Norvig&rsquo;s a second time for the back paper. Well, rationalization is the solution to all of world&rsquo;s problems ;).</p>

<p>But somehow, I didn&rsquo;t feel bad about it&hellip;..<em>shit</em></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2008-04-24T13:26:00+05:30" data-updated="true" itemprop="datePublished">Apr 24<span>th</span>, 2008</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/foss-and-linux/'>FOSS and Linux</a>, <a class='category' href='/blog/categories/rants/'>Rants</a>, <a class='category' href='/blog/categories/embedded/'>embedded</a>, <a class='category' href='/blog/categories/gsoc/'>gsoc</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/neo1973/'>neo1973</a>, <a class='category' href='/blog/categories/odeviced/'>odeviced</a>, <a class='category' href='/blog/categories/openmoko/'>openmoko</a>


</div>
		
			<span class="comments"><a href="/blog/2008/04/24/odeviced-device-daemon-for-the-freerunner/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2008/04/24/odeviced-device-daemon-for-the-freerunner/" itemprop="url">Odeviced: Device Daemon for the FreeRunner</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Man, its quite difficult to sneak up and write a blog post when semesters are around the corner. So as mentioned in the last post, my project for this summer would be to write a device daemon for the Openmoko platform. We already have neod offering keypad and power management, but its not that elegant. Hence I proposed a DBUS replacement as a SoC project which got through.</p>

<p>So, heres a <a href="http://sudharsh.unixpod.com/googsoc.pdf">pdf</a> of the proposed <em>ahem</em> architecture. (Boy, I love that word. Sounds enterprisey). it looks a bit sucky since I did it using a touchpad, but hey, something is better than nothing.</p>

<p>I was looking at pulseaudio code for a while and liked it pretty much. So naturally, odeviced will borrow ideas from pulseaudio a bit heavily. My idea of odeviced is as follows,</p>

<ul>
<li><p>A dbus service with support for loadable plugins.</p></li>
<li><p>These plugins can be arbitrary, from managing power, gps to controlling the uber secret laser katana in the FreeRunner (oops. I let the secret out)</p></li>
<li><p>And of course, some user space applications may want to know whats going on under the hood. So expose some sort of api from the dbus service.</p></li>
</ul>


<p>Initially for the SoC, I will be working for full odeviced support for the FreeRunner, and maybe later on write plugins for other devices as well. Especially for the ones from Motorola.</p>

<p>For the implementation, here are the things I need to learn over the next month</p>

<ul>
<li><p>Vala, its a cool language built around GLib.</p></li>
<li><p>DBUS, My experience with dbus is now limited to the tutorial code</p></li>
<li><p>Prolly some HAL and udev and touch upon the kernel stuff if need arises</p></li>
<li><p>&hellip;and <em>cough</em> to manage my time and write good code&hellip;</p></li>
</ul>


<p>Heres the <a href="http://code.google.com/soc/2008/openmoko/appinfo.html?csaid=C4E490026007DA79">abstract</a> of my proposal. Thanks to <a href="http://tuxmaniac.com">tuxmaniac</a>, <a href="http://prashblog.com">Casanova</a>, <a href="http://technofreakatchennai.wordpress.com">techno_freak</a>, <a href="http://www.raja-gopal.com/">tuxplorer</a>, <a href="http://pygi.wordpress.com/">pygi</a> and many more for proofreading my proposal which at the beginning looked like a love letter written by a 5 year old.</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
        <a href="/blog/page/4/" class="prev">Prev</a>
    
    
        <a href="/blog/page/6/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Sudharshan S


- Design forked from <a href="http://github.com/shashankmehta/greyshade">Greyshade</a>
</footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'blogsudharsh';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
